{"ast":null,"code":"var _jsxFileName = \"/Users/ford/Desktop/marketapp/ui/src/components/Products/Item.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { InputGroup, FormControl, Form, Button } from 'react-bootstrap';\nimport { FaLiraSign } from 'react-icons/fa';\nimport BasketAction from '../../actions/basket';\nimport Photo from './Photo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Item = ({\n  id,\n  name,\n  price\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const localization = useSelector(state => state.localization);\n  const storeBasketProducts = useSelector(state => state.basket.products);\n  const gridReload = useSelector(state => state.products.grid.toggleRefresh);\n\n  const handleAddProduct = () => {\n    let products = storeBasketProducts;\n    let productToModify = products.filter(p => p.id === id)[0];\n\n    if (productToModify === undefined) {\n      products.push({\n        id: id,\n        name: name,\n        qty: 1,\n        unitPrice: price\n      });\n    } else {\n      productToModify.qty = productToModify.qty + 1;\n    }\n\n    dispatch(BasketAction.setBasketProducts(products));\n  };\n\n  const stageCanvasRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'mt20',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: stageCanvasRef,\n      className: 'productsItemBorder text-center h-75 w-100',\n      children: useMemo(() => /*#__PURE__*/_jsxDEV(Photo, {\n        size: stageCanvasRef.current === null ? null : Math.floor(stageCanvasRef.current.offsetWidth * 0.9)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 21\n      }, this), [stageCanvasRef.current, gridReload])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'primaryTextColor textBold mt5',\n      children: [/*#__PURE__*/_jsxDEV(FaLiraSign, {\n        className: 'moneySign'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this), price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt3',\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt5',\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: 'buttonSmall w-100',\n        size: 'sm',\n        onClick: () => handleAddProduct(),\n        children: localization.add\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Item, \"Mn3QaxCDFcAWN/J3Zp55P41x/xI=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Item;\nexport default Item;\n\nvar _c;\n\n$RefreshReg$(_c, \"Item\");","map":{"version":3,"sources":["/Users/ford/Desktop/marketapp/ui/src/components/Products/Item.js"],"names":["React","useEffect","useState","useRef","useMemo","useSelector","useDispatch","InputGroup","FormControl","Form","Button","FaLiraSign","BasketAction","Photo","Item","id","name","price","dispatch","localization","state","storeBasketProducts","basket","products","gridReload","grid","toggleRefresh","handleAddProduct","productToModify","filter","p","undefined","push","qty","unitPrice","setBasketProducts","stageCanvasRef","current","Math","floor","offsetWidth","add"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, useMemo } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { InputGroup, FormControl, Form, Button } from 'react-bootstrap'\nimport { FaLiraSign } from 'react-icons/fa'\nimport BasketAction from '../../actions/basket'\nimport Photo from './Photo'\n\nconst Item = ({ id, name, price }) => {\n    const dispatch = useDispatch()\n    const localization = useSelector(state => state.localization)\n    const storeBasketProducts = useSelector((state) => state.basket.products)\n    const gridReload = useSelector(state => state.products.grid.toggleRefresh)\n\n    const handleAddProduct = () => {\n        let products  = storeBasketProducts\n\n        let productToModify = products.filter((p)=>(p.id === id))[0]\n\n        if(productToModify === undefined){\n            products.push({ id: id, name: name, qty: 1, unitPrice: price })\n        }\n        else{\n            productToModify.qty = productToModify.qty + 1\n        }\n\n        dispatch(BasketAction.setBasketProducts(products))\n    }\n\n    const stageCanvasRef = useRef(null)\n\n    return(\n        <div className={'mt20'}>\n            <div ref={stageCanvasRef} className={'productsItemBorder text-center h-75 w-100'}>\n                {useMemo(() => (\n                    <Photo size={stageCanvasRef.current === null ? null : Math.floor(stageCanvasRef.current.offsetWidth * 0.9)}></Photo>\n                ), [stageCanvasRef.current, gridReload])}\n            </div>\n            <div className={'primaryTextColor textBold mt5'}>\n                <FaLiraSign className={'moneySign'}></FaLiraSign>\n                { price }\n            </div>\n            <div className={'mt3'}>\n                { name }\n            </div>\n            <div className={'mt5'}>\n                <Button \n                    className={'buttonSmall w-100'} \n                    size={'sm'} \n                    onClick={()=>handleAddProduct()}\n                >{localization.add}</Button>\n            </div>\n        </div>\n    )\n}\n\nexport default Item"]},"metadata":{},"sourceType":"module"}